<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./assets/styles/reset.css">
  <link rel="stylesheet" href="./assets/styles/variables.css">
  <link rel="stylesheet" href="./assets/styles/header.css">
  <title>Practice</title>
  <style>
    body,
    html {
      width: 100%;
      padding: 0;
      margin: 0;
      height: fit-content;
      color: #333;
      font-size: 18px;
    }

    button {
      color: #333;
    }

    header {
      padding: 20px;
    }

    .practice-container {
      width: 85%;
      margin: auto;
      margin-top: 120px;
      min-height: calc(100vh - 220px);
      padding: 20px 30px 0;
    }


    .console-result {
      position: fixed;
      bottom: 0;
      height: 100px;
      width: 100vw;
      left: 0;
      right: 0;
      padding: 10px;
      background: #222222;
      border-top: 1px solid #b2b1b1;
    }

    .result {
      color: whitesmoke;
      font-weight: 600;
      position: relative;
    }

    .result:before {
      content: '>';
      font-weight: 600;
      left: 0;
      padding: 20px;
      padding-right: 10px;


    }

    .kletka-pole {
      background-color: #ffffef;
    }
  </style>

  <script>
    function $(elem) {
      return document.querySelector(elem)
    }
  </script>

  <style>
    /* practice styles here */

    .game-wrapper {
      position: relative;
      background: #004cf2;
      background: -moz-linear-gradient(top, #004cf2 0%, #00b7ea 100%);
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #004cf2), color-stop(100%, #00b7ea));
      background: -webkit-linear-gradient(top, #004cf2 0%, #00b7ea 100%);
      background: -o-linear-gradient(top, #004cf2 0%, #00b7ea 100%);
      background: -ms-linear-gradient(top, #004cf2 0%, #00b7ea 100%);
      background: linear-gradient(top, #004cf2 0%, #00b7ea 100%);
    }

    /* hero */
    .hero {
      height: 300px;
      width: 200px;
      left: 200px;
      position: relative;
      display: inline-block;
      transform: scale(0.6);
      bottom: -42px;
      z-index: 2;
    }

    .hero.hited {
      transform: translate(16px, 10px) rotate(-15deg);
    }

    .head {
      position: absolute;
      top: 10px;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      left: 50px;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
      border: 10px solid black;
    }

    .head:before {
      content: "";
      position: absolute;
      top: 20%;
      height: 20px;
      width: 16px;
      background: black;
      left: 26px;
      border-radius: inherit;
      box-shadow: 25px 0 0 black;
      animation: blinkHero 3s infinite linear;
    }

    .one:nth-child(1) .head:after {
      border-bottom: 20px solid black;
      border-radius: 50% 50% 0 0;
    }

    .one:nth-child(2) .head:after {
      border-top: 20px solid black;
      border-radius: 0 0 50% 50%;
    }

    .back {
      position: absolute;
      top: 110px;
      width: 10px;
      height: 40%;
      background: black;
      left: 50%;
      transform: translateX(-50%);
    }

    /* .back:before {
      content: "";
      position: absolute;
      height: 100%;
      width: 100%;
      background: black;
      left: 0;
      top: -27px;
      transform: translateX(41px) rotate(25deg);
      clip-path: polygon(50% 0, 0 100%, 100% 100%);
    } */

    .arms {
      position: absolute;
      top: 40%;
      height: 20%;
      width: 10px;
      left: 40%;
      transition: 1.4s ease-in-out;
    }

    .arms:after,
    .arms:before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: black;
      transform: rotate(30deg);
    }

    .arms:before {
      transform: rotate(-30deg);
      left: 280%;
    }

    .legs {
      position: absolute;
      bottom: 9%;
      height: 50px;
      width: 50px;
      border-bottom: 10px solid black;
      border-left: 10px solid black;
      left: calc(50% - 24px);
      transform: rotate(135deg);
    }

    .hero.hit .arms:before {
      animation: 1s moveArm;
    }



    @keyframes moveArm {

      50% {
        transform: rotate(-50deg);
        top: -14%;
        left: 380%;
      }

      100% {
        transform: rotate(-30deg);
        left: 280%;
      }
    }

    @keyframes moveKnife {
      50% {
        transform: translateX(50px) rotate(61deg);
      }

      100% {
        transform: translateX(0px) rotate(28deg);
      }
    }

    /* blink */

    @keyframes blinkHero {

      0%,
      4%,
      44%,
      50%,
      75%,
      80%,
      100% {
        transform: scaleY(1);
      }

      47% {
        transform: scaleY(0);
      }
    }

    /* end hero */

    /* monster */

    .monster {
      width: 42vw;
      bottom: 32px;
      left: 100px;
      position: relative;
      overflow: hidden;
      z-index: 0;
    }

    .body {
      width: 32vmin;
      height: 32vmin;
      background-color: teal;
      border-radius: 43% 40% 43% 40%;
      position: absolute;
      bottom: calc(-1 * 32vmin / 2 - 4vmin);
      left: 47%;
      animation:
        wander 2.5s linear infinite alternate,
        wave 3s linear infinite,
        bounce 1s infinite alternate;
    }

    .monster.hited .eyes {
      animation: wanderHited 2s linear alternate;
    }

    .monster.hited .monster-hit-points {
      animation: wanderHited 2s linear alternate;
    }

    .monster.hited .body {
      animation:
        wanderHited 2s linear infinite alternate,
        waveHited 1s linear infinite,
        bounceHited 1s alternate infinite;
    }

    @keyframes bounceHited {
      to {
        bottom: calc(-1 * 6vmin / 2 - 2vmin);
      }
    }

    @keyframes waveHited {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes wanderHited {
      to {
        left: calc(60% - 6vmin + 2vmin);
      }
    }

    .eyes {
      width: 24vmin;
      height: 5vmin;
      position: absolute;
      bottom: 2vmin;
      left: 47%;
      animation: wander 2.5s linear infinite alternate;
    }

    .monster-hit-points {
      width: 24vmin;
      height: 5vmin;
      position: absolute;
      bottom: 14vmin;
      left: 47%;
      animation: wander 2.5s linear infinite alternate;
      z-index: 123;
    }

    .eyes::before,
    .eyes::after {
      content: '';
      position: absolute;
      width: 5vmin;
      height: 5vmin;
      border: 1.25vmin solid white;
      box-sizing: border-box;
      border-radius: 50%;
      animation: blink 3s infinite linear;
    }

    .eyes::before {
      left: 4vmin;
    }

    .eyes::after {
      right: 4vmin;
    }

    @keyframes bounce {
      to {
        bottom: calc(-1 * 6vmin / 2 - 2vmin);
      }
    }

    @keyframes wave {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes wander {
      to {
        /* left: calc(60% - 6vmin + 2vmin); */
        left: 8%;
      }
    }

    @keyframes blink {

      0%,
      4%,
      10%,
      34%,
      40%,
      100% {
        transform: scaleY(1);
      }

      7%,
      37% {
        transform: scaleY(0);
      }
    }

    /* end monster */
    /*  sky */
    .cloud1 {
      opacity: 1;
      border-radius: 150px / 30px;
      width: 150px;
      height: 36px;
      background: #fff;
      position: absolute;
      left: 52%;
      top: 30px;
      z-index: 10;
    }

    .cloud1-1 {
      left: 60px;
      top: -10px;
    }

    .cloud1-2 {
      left: 100px;
      top: 20px;
    }

    .cloud2 {
      opacity: 1;
      z-index: 10;
      border-radius: 100px / 40px;
      width: 130px;
      height: 50px;
      background: #fff;
      position: absolute;
      left: 20%;
      top: 30px;
    }

    .cloud2-1 {
      left: 30px;
      top: -16px;
    }

    .cloud2-2 {
      left: 80px;
      top: -12px;
    }

    /* background: linear-gradient(top, #0671bc 0%, #afd8e7 100%); */
    /* end sky */


    .battle_area {
      display: flex;
      background: url('./game-monster/back.png') no-repeat;
      background-size: auto 100%;
    }

    .battle_area:before {
      content: '';
      display: block;
      position: absolute;
      background: linear-gradient(top, #0671bc 0%, #afd8e7 100%);

    }

    .waves {
      height: 100px;
      margin-top: -75px;
      overflow: hidden;
    }

    .wave-first,
    .wave-second {
      height: 50px;
      background-image: url('./game-monster/splashWawes.webp');
      background-size: contain;
    }

    .wave-first {
      animation: waves-left 3s ease-in-out infinite;
      transform: scaleX(-1);
    }

    .wave-second {
      z-index: -1;
      margin-top: -21px;
      margin-right: -35px;
      animation: waves-right 3s ease-in-out infinite;
    }

    .sun {
      position: absolute;
      top: 0;
      right: 0;
      display: block;
      height: 130px;
      width: 130px;
      z-index: 1;
    }

    .sun img {
      animation: sunshine 3s infinite ease-in;
    }

    @keyframes sunshine {
      0% {
        transform: scale(1) rotate(0deg)
      }

      50% {
        transform: scale(1.03) rotate(3deg)
      }

      100% {
        transform: scale(1) rotate(0deg)
      }
    }

    img {
      height: 100%;
      width: 100%;
    }

    @keyframes waves-left {
      0% {
        transform: translate(15px, 15px)
      }

      50% {
        transform: translate(5px, 5px)
      }

      100% {
        transform: translate(15px, 15px)
      }
    }

    @keyframes waves-right {
      0% {
        transform: translate(-6px, -6px)
      }

      25% {
        transform: translate(-3px, 3px)
      }

      50% {
        transform: translate(0px, 0px)
      }

      75% {
        transform: translate(-3px, -3px)
      }

      100% {
        transform: translate(-6px, -6px)
      }
    }

    .monster-hit {
      background: url('./game-monster/monster_pow1.png') no-repeat;
      top: -50px;
      left: -30px;
    }

    .hero-hit {
      background: url('./game-monster/hit.png') no-repeat;
      top: -86px;
      left: -39px;
    }

    .monster-hit,
    .hero-hit {
      display: none;
      height: 110px;
      width: 110px;
      background-size: contain;
      position: absolute;
    }

    .hero.hited .monster-hit {
      display: block;
    }

    .monster.hited .hero-hit {
      display: block;
    }

    .hit-button {
      height: 180px;
      position: absolute;
      right: 12px;
      bottom: 30%;
      user-select: none;
      transform: rotate(28deg);
    }

    .hero.hit .hit-button {
      animation: 1s moveKnife;
    }

    /* end practice styles here */
  </style>


</head>

<body>
  <!-- header -->
  <header>
    <div>
      <a href="./index.html">pens</a>
      <a href="./index.html">Theory</a>
    </div>
    <p>Programs: <a href="./programs/cofeMachine/coffeM_index.html">COFFE</a></p>
    <div class="logo"></div>
    <div class="upd_button" onclick="document.location.reload()">
      <span>&#10552;</span>
      <span>&#10552;</span>
    </div>
  </header>
  <!-- end header -->
  <div class="practice-container kletka-pole">
    <div class="theory-inner">
      <div class="theory-block">
        <!-- practice here -->

        <div class="game-wrapper">


          <div id="sky-area">
            <div class="sunset-sky"></div>
            <div id="cloud1" class="cloud1">
              <div class="cloud1 cloud1-1"></div>
              <div class="cloud1 cloud1-2"></div>
            </div>
            <div id="cloud2" class="cloud2">
              <div class="cloud2 cloud2-1"></div>
              <div class="cloud2 cloud2-2"></div>
            </div>
          </div>


          <div class="battle_area">
            <div class="hero ">
              <div class="hero-hit-points ">
                <span class="hit-points-char">&#10084;</span>
                <span class="hit-points-value hero-hp"></span>
              </div>
              <button class="hit-button">
                <img src="./game-monster/sword.png" alt="sword">
              </button>
              <div class="monster-hit"> </div>
              <div class="head"></div>
              <div class="back"> </div>
              <div class="arms"></div>
              <div class="legs"> </div>
            </div>

            <div class="monster">
              <div class="monster-hit-points">
                <span class="hit-points-char">&#10084;</span>
                <span class="hit-points-value monster-hp"></span>
              </div>
              <span class="body"> </span>
              <span class="eyes">
                <div class="hero-hit"></div>
              </span>

            </div>

            <div class="defeat">Defeat &#9785;</div>
            <div class="defeat">Win &#9786;</div>

          </div>
          <div class="waves">
            <div class="wave-first"> </div>
            <div class="wave-second"> </div>
          </div>
          <div class="sun">
            <img src="./game-monster/sun.png" alt="sun">
          </div>
        </div>

        <!-- end practice here -->
      </div>
    </div>
  </div>

  <script>
    class Actor {
      constructor(hp, str, state, actor) {
        this.hp = hp
        this.str = str
        this.state = state
        this.actor = actor
      }

      set setHp(damage) {
        return this.hp - damage
      }

      get getHp() {
        return this.hp
      }

      setStr = val => this.str + val

      setState = () => !this.state

      hit = () => this.hp -= this.str
    }


    class Hero extends Actor {
      activateHero = () => {
        $('.hero-hp').innerText = this.hp

        $('.hit-button').addEventListener('click', (e) => {

          $('.hero').classList.toggle('hit')
          $('.hit-button').disabled = true

          if ($('.body').getBoundingClientRect().left < 505) {
            $('.monster').classList.add('hited')
          }
          console.log('this hero', this)

          setTimeout(() => {
            $('.hero').classList.remove('hit')
            $('.monster').classList.remove('hited')
            $('.hit-button').disabled = false
          }, 1000)
        })
      }
    }

    class Monster extends Actor {
      activateMonster = () => {
        $('.monster-hp').innerText = this.hp
        console.log('this monster', this)
        setInterval(() => {
          if ($('.body').getBoundingClientRect().left < 490) {
            game.increaseRound()

            $('.hero').classList.add('hited')
            $('.hit-button').disabled = true

            setTimeout(() => {
              $('.hero').classList.remove('hited')
              $('.hit-button').disabled = false
            }, 1500)
          }

          const monsterPosition = 500
          const displayWidth = document.body.clientWidth
        }, 1000);
      }


    }
    class Game {
      hero = new Hero(30, 10, true)
      monster = new Monster(50, 15, true)

      constructor(round, monsterScore, heroScore) {
        this.round = round
        this.monsterScore = monsterScore
        this.heroScore = heroScore
      }

      gameStarts = () => {
        this.monster.activateMonster()
        this.hero.activateHero()
      }


      increaseRound = () => this.round++

      heroHit = () => this.monster.hp -= this.hero.str

      monsterHit = () => this.hero.hp -= this.monster.str

      set increaseRound(round) {
        return this.round += round
      }

      get showRound() {
        return this.round
      }

      raiseStr = () => this.str += 5

      raiseHp = () => this.str += 10
    }



    let game = new Game(1, 1, 1)
    game.gameStarts()

    console.log('hit',game.heroHit())
    console.log('hp monster', game.monster.hp)

  </script>

</body>

</html>